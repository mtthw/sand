<html>
      <head>
            <title>
                  Instabin
            </title>
            <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7620288-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
            <script src=
            "shortcuts.js"
            type="text/javascript"></script>
            <link href=
            'http://fonts.googleapis.com/css?family=Yellowtail'
            rel='stylesheet' type='text/css'>
            <link href=
            'style.css'
            rel='stylesheet' type='text/css'>
            <link href=
            "favicon.ico"
            rel="Shortcut Icon">
            <script type="text/javascript">

                        
            var old = '';

            function update() {
            var docObj = window.frames['updateFrame'].document;
            var textarea = document.getElementById("ta");

            if(old != textarea.value) {
            old = textarea.value;
            docObj.open();
            docObj.write(old);
            docObj.close();
            }
            window.setTimeout(update, 150)
            }
                        
                        Count=0
            timer=""
            function Set_Count_Mouse() {
            clearTimeout(timer)
            Count++
            timer=setTimeout("Check_Count_Mouse()",300)
            }
            function Check_Count_Mouse() {
            if(Count==4) {
            click1()
            }
                        if(Count==5) {
            click3()
            }
            Count=0
            }
                        
            function click1() {
            document.getElementById('updateFrame').style.width = '99.9%';
            show('updateFrame');
            hide('ta');
            //show('fullscreenOff');
            }
            function click2() {
            show('ta');
            show('updateFrame');
            document.getElementById('updateFrame').style.width = '60%';
            document.getElementById('ta').style.width = '39.7%';
            //hide('fullscreenOff');
            }
            function click3() {
            document.getElementById('ta').style.width = '99.9%';
            show('ta');
            hide('updateFrame');
            //show('fullscreenOff');
            }

            function hide(d) { document.getElementById(d).style.display = "none"; }
            function show(d) { document.getElementById(d).style.display = "inline"; }
                        
                        var cookie = "value";
                        function push() {
                            var cookie = document.getElementById('text').value;
                            document.getElementById('ta').value = window.localStorage.getItem(cookie);
                        }

                        function save() {
                            var cookie = document.getElementById('text').value;
                            window.localStorage.setItem(cookie, document.getElementById('ta').value);
                        }
                        
                        
                        shortcut.add("Ctrl+H",function() {
                        window.location = 'help'
                        });
                        shortcut.add("Ctrl+Enter",function() {
                        document.code.submit();
                        });
                        shortcut.add("Ctrl+M",function() {
                        click2();
                        });
                        shortcut.add("Tab",function() {
                        document.getElementById('text').focus();
                        document.getElementById('text').select();
                        });
                        shortcut.add("Shift+Tab",function() {
                        document.getElementById('ta').focus();
                        });
                        shortcut.add("Ctrl+.",function() {
                        click1();
                        });
                        shortcut.add("Ctrl+,",function() {
                        click3();
                        });
            </script>
      </head>
      <body id="body" onload="update(); push();">
      <div id="instabin">
            <iframe src="javascript:''" height="100%" width="100%"
            name="updateFrame" id="updateFrame"></iframe>
            <form name="code" method="post" action=
            "save.php">
                  <textarea onclick="Set_Count_Mouse();" onkeyup=
                  "save()" height="100%" width="100%" autofocus=""
                  name="ta" id="ta" placeholder=
                  "Type your HTML here..." required></textarea>
            </form>
            <div id="footer">
                  <div onclick=
                  "window.location = 'http://mtthw.me/instabin'"
                  id="head">
                        Instabin
                  </div>
                  <button onclick="click3()">&#60;</button> 
                  <button onclick="click2()">|</button>
                  <button onclick="click1()">&#62;</button>
                  <!--<button id="fullscreenOff" onclick=
                  "click2()">X</button>-->
                  <button onclick="show('help'); hide('instabin')" title="Help">?</button>
                  <!--<input placeholder="Custom URL..." title="Custom URL" onchange="document.code.submit();" id="custom" style="font-size: 10px;" type="text" name="custom"/>-->
                   <button onclick=
                  "document.code.submit();">Save</button>
                  <input placeholder="Local project..." title=
                  "Project" id="text" type="text" onkeyup=
                  "push()"></button></a>
            </div>
        </div>
        <div id="help">
        <button onclick="show('instabin'); hide('help')"><< Back</button>
<br/>1. Clicking on the textarea 4 times quickly to switch to fullscreen.
<br/>2. Clicking on the textarea 5 times quickly to switch to code view.
<br/>3. Type the name of a cookie into the "Local project..." textbox to load it.
<br/>4. Ctrl+.: preview mode
<br/>5. Ctrl+,: code view
<br/>6. Ctrl+M: split view
<br/>7. Tab: select the "Local project" text box
<br/>8. Shift+Tab: select code text box
<br/>9. Ctrl+Enter: save to Instabin
<br><br>
<a href="http://mtthw.me/instabin/list">List of Instabin creations</a>
<br>
<a href="https://chrome.google.com/webstore/detail/adifaiooahoghhgfhlobapdpbfemkooj">Chrome App</a>
<p>Created by <a href="http://twitter.com/mtthwn">@mtthwn</a></p>

        </div>
            <script type="text/javascript">

            (function() {

            try {
            (window.localStorage.getItem) // will throw in Firefox under some settings
            } catch (e) {
            return; // quit because dom.storage.enabled is false
            }

            var area = document.querySelector('#text');
            // place content from previous edit
            if (!area.value) {
            area.value = window.localStorage.getItem('project');
            }

            // your content will be saved locally
            document.querySelector('#text').addEventListener('keyup', function() {
            window.localStorage.setItem('project', area.value);
            }, false);
            })();
            </script>
            <script type="text/javascript">

            function resizeTextArea() {
            var heightOfForm = document.getElementById('fromWrapper').offsetHeight;
            var heightOfBody = document.body.clientHeight;
            var buffer = 35;
            document.getElementById('ta').style.height = (heightOfBody - heightOfForm) - buffer;
            }
            </script>
      </body>
</html>
